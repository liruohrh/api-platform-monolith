"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9860],{23498:function(z,x,e){e.d(x,{HU:function(){return K},IV:function(){return T},VQ:function(){return E},WR:function(){return g},r7:function(){return R}});var y=e(97857),h=e.n(y),b=e(5574),m=e.n(b),p=e(59753);function E(c){var t=m()(c,2),n=t[0],i=t[1];return"".concat((0,p.zR)(n),",").concat((0,p.zR)(i))}function K(c){var t=h()({},c);if(t.ctime){var n=m()(t.ctime,2),i=n[0],F=n[1];t.ctimeRange="".concat((0,p.yI)(i),",").concat((0,p.yI)(F)),delete t.ctime}if(t.utime){var f=m()(t.utime,2),l=f[0],d=f[1];t.utimeRange="".concat((0,p.yI)(l),",").concat((0,p.yI)(d)),delete t.utime}return t}function g(c){var t=h()({},c);if(t.ctime){var n=m()(t.ctime,2),i=n[0],F=n[1];t.ctime="".concat((0,p.yI)(i),",").concat((0,p.yI)(F))}if(t.utime){var f=m()(t.utime,2),l=f[0],d=f[1];t.utime="".concat((0,p.yI)(l),",").concat((0,p.yI)(d))}return t}function R(c){var t={};for(var n in c){var i=c[n];i==="ascend"?t[n+"S"]=!0:i==="descend"&&(t[n+"S"]=!1)}return t}function T(c){var t={};for(var n in c)if(c[n]==="ascend"?t[n]=!0:c[n]==="descend"&&(t[n]=!1),["ctime","utime"].includes(n)){var i=t[n];delete t[n],t["".concat(n,"S")]=i}return t}},19274:function(z,x,e){e.d(x,{u:function(){return y}});var y=[{label:"\u5783\u573E\u5E7F\u544A",value:"spam",description:"\u5305\u542B\u5E7F\u544A\u3001\u5F15\u6D41\u3001\u63A8\u5E7F\u7B49\u5783\u573E\u4FE1\u606F"},{label:"\u8FDD\u6CD5\u8FDD\u89C4",value:"illegal",description:"\u5305\u542B\u8FDD\u6CD5\u8FDD\u89C4\u3001\u6D89\u9EC4\u6D89\u66B4\u7B49\u4FE1\u606F"},{label:"\u6076\u610F\u653B\u51FB",value:"attack",description:"\u5305\u542B\u4EBA\u8EAB\u653B\u51FB\u3001\u8C29\u9A82\u7B49\u4E0D\u5F53\u8A00\u8BBA"},{label:"\u865A\u5047\u4FE1\u606F",value:"fake",description:"\u5305\u542B\u865A\u5047\u3001\u8BEF\u5BFC\u6027\u4FE1\u606F"},{label:"\u4FB5\u72AF\u6743\u76CA",value:"rights",description:"\u4FB5\u72AF\u4ED6\u4EBA\u77E5\u8BC6\u4EA7\u6743\u6216\u5176\u4ED6\u5408\u6CD5\u6743\u76CA"},{label:"\u4E0D\u5B9E\u8BC4\u4EF7",value:"false_review",description:"\u865A\u5047\u8BC4\u4EF7\u3001\u6076\u610F\u5DEE\u8BC4"},{label:"\u5176\u4ED6\u539F\u56E0",value:"other",description:"\u5176\u4ED6\u8FDD\u89C4\u884C\u4E3A"}]},59537:function(z,x,e){e.d(x,{E:function(){return y},I:function(){return h}});function y(b){return Number((b/2).toFixed(1))}function h(b){return Number((b/20).toFixed(1))}},49897:function(z,x,e){e.r(x),e.d(x,{default:function(){return je}});var y=e(97857),h=e.n(y),b=e(9783),m=e.n(b),p=e(19632),E=e.n(p),K=e(15009),g=e.n(K),R=e(99289),T=e.n(R),c=e(5574),t=e.n(c),n=e(67294),i=e(53025),F=e(2453),f=e(42075),l=e(83622),d=e(4393),P=e(17788),I=e(55102),A=e(24727),D=e(59753),J=e(90930),M=e(70170),de=e(93410),ce=e(76772),B=e(71471),X=e(86250),me=e(19207),N=e(66309),r=e(85893),pe=function(Z){var O=Z.status;switch(O){case 0:return(0,r.jsx)(N.Z,{color:"processing",children:"\u5F85\u5BA1\u6838"});case 1:return(0,r.jsx)(N.Z,{color:"success",children:"\u5DF2\u901A\u8FC7"});case 2:return(0,r.jsx)(N.Z,{color:"error",children:"\u672A\u901A\u8FC7"});case 20:return(0,r.jsx)(N.Z,{color:"error",children:"\u53D6\u6D88\u7533\u8BF7"});default:return(0,r.jsx)(N.Z,{children:"\u672A\u77E5\u72B6\u6001"})}},Y=pe,w=e(59537),fe=function(Z){var O=Z.open,a=Z.record,ee=Z.onCancel;return(0,r.jsx)(P.Z,{title:"\u8BC4\u8BBA\u4E3E\u62A5\u8BE6\u60C5",open:O,onCancel:function(){ee()},width:"80%",footer:!1,children:(0,r.jsx)(de.Z,{children:(0,r.jsxs)(f.Z,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsx)(l.ZP,{type:"link",style:{padding:0},children:(0,r.jsxs)(ce.Link,{to:"/api/info/".concat(a.apiId),children:["API\uFF1A",a.apiName]})}),(0,r.jsxs)(B.Z.Title,{level:5,children:["\u4E3E\u62A5\u8005\uFF1A",a.reporterNickname,"@ ",a.reporterUsername]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u4E3E\u62A5\u65F6\u95F4\uFF1A",(0,D.i$)(a.ctime)]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u4E3E\u62A5\u539F\u56E0\uFF1A",a.reason]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u4E3E\u62A5\u5185\u5BB9\uFF1A",a.description]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u5BA1\u6838\u72B6\u6001\uFF1A",(0,r.jsx)(Y,{status:a.auditStatus})]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u5BA1\u6838\u56DE\u590D\uFF1A",a.replyContent?a.replyContent:"\u65E0"]}),(0,r.jsxs)(d.Z,{title:"\u88AB\u4E3E\u62A5\u7684\u8BC4\u8BBA",children:[(0,r.jsxs)(X.Z,{justify:"space-between",children:[(0,r.jsxs)(B.Z.Title,{level:4,children:[a.reportedComment.userNickName,"@ ",a.reportedComment.username]}),a.reportedComment.score!==void 0&&a.reportedComment.score!==0&&(0,r.jsxs)("div",{children:["\u8BC4\u5206\uFF1A",(0,r.jsx)(me.Z,{allowHalf:!0,disabled:!0,value:(0,w.E)(a.reportedComment.score)}),"(",(0,w.E)(a.reportedComment.score),")"]}),(a.reportedComment.score===void 0||a.reportedComment.score===0)&&(0,r.jsx)("div",{children:"\u65E0\u8BC4\u5206(\u4E0D\u662F\u5BF9API\u7684\u8BC4\u8BBA)"})]}),(0,r.jsxs)(B.Z.Paragraph,{children:["\u8BC4\u8BBA\u5185\u5BB9\uFF1A",a.reportedComment.content]}),(0,r.jsxs)(X.Z,{justify:"space-between",children:[(0,r.jsx)(f.Z,{direction:"horizontal",size:"large",children:(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)("span",{children:["\u{1F44D} ",a.reportedComment.favorCount||0]}),(0,r.jsxs)("span",{children:["\u{1F4AC} ",a.reportedComment.replyCount||0]})]})}),(0,r.jsx)(B.Z.Text,{type:"secondary",children:(0,D.i$)(a.reportedComment.ctime)})]})]})]})})})},_e=fe,H=e(19274),k=e(23498),ve=5,he=function(){var Z=(0,n.useState)(!1),O=t()(Z,2),a=O[0],ee=O[1],re=(0,n.useState)(!1),te=t()(re,2),ne=te[0],V=te[1],Ce=(0,n.useState)(void 0),ae=t()(Ce,2),U=ae[0],G=ae[1],Ee=(0,n.useState)(!1),oe=t()(Ee,2),ue=oe[0],le=oe[1],Ae=i.Z.useForm(),De=t()(Ae,1),Q=De[0],ie=(0,n.useRef)(),xe=function(v){G(v),V(!0)},se=function(){var u=T()(g()().mark(function v(o,s){var j,C,S;return g()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(!s&&!U)){_.next=2;break}return _.abrupt("return");case 2:return s||(s=U),_.next=5,Q.validateFields();case 5:return C=_.sent,_.next=8,(0,A.nN)({id:s.id},{replyContent:C.replyContent,auditStatus:o});case 8:if(S=_.sent,S.code===0){_.next=11;break}return _.abrupt("return");case 11:(j=ie.current)===null||j===void 0||j.reload(),G(void 0),F.ZP.success("\u5BA1\u6838\u6210\u529F"),V(!1);case 15:case"end":return _.stop()}},v)}));return function(o,s){return u.apply(this,arguments)}}(),ge=[{title:"ID",dataIndex:"id",key:"id",sorter:!1,search:!1},{title:"\u4E3E\u62A5\u8005",dataIndex:"reporterNickname",width:200,sorter:!1,search:!0,render:function(v,o){return(0,r.jsxs)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:[o.reporterNickname,"@",o.reporterUsername]})}},{title:"\u4E3E\u62A5\u539F\u56E0",dataIndex:"reason",width:150,search:!0,sorter:!1,valueEnum:Object.assign.apply(Object,[{}].concat(E()(H.u.map(function(u){return m()({},u.value,{text:u.label})})))),render:function(v,o){var s,j;return(0,r.jsx)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:(s=(j=H.u.find(function(C){return C.value===o.reason}))===null||j===void 0?void 0:j.label)!==null&&s!==void 0?s:o.reason})}},{title:"\u8BE6\u7EC6\u8BF4\u660E",dataIndex:"description",width:450,sorter:!1,search:!1,render:function(v,o){var s=o.description;if(!s){var j,C;s=(j=(C=H.u.find(function(S){return S.value===o.reason}))===null||C===void 0?void 0:C.description)!==null&&j!==void 0?j:""}return(0,r.jsx)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:s})}},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"auditStatus",width:80,search:!0,valueEnum:{0:{text:"\u5F85\u5BA1\u6838"},1:{text:"\u5DF2\u901A\u8FC7"},2:{text:"\u672A\u901A\u8FC7"}},render:function(v,o){return(0,r.jsx)(Y,{status:o.auditStatus})}},{title:"\u4E3E\u62A5\u65F6\u95F4",dataIndex:"ctime",width:160,valueType:"dateTimeRange",sorter:!0,search:!0,render:function(v,o){return(0,D.i$)(o.ctime)}},{title:"\u64CD\u4F5C",sorter:!1,search:!1,width:150,render:function(v,o){return(0,r.jsxs)(f.Z,{direction:"horizontal",size:8,children:[(0,r.jsx)(l.ZP,{style:{padding:0},type:"link",color:"primary",onClick:function(){G(o),le(!0)},children:"\u67E5\u770B"}),(0,r.jsx)(l.ZP,{style:{padding:0},type:"link",onClick:function(){return xe(o)},children:"\u5BA1\u6838"})]})}}];return(0,r.jsx)(J._z,{title:!1,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(M.Z,{actionRef:ie,columns:ge.map(function(u){return h()(h()({},u),{},{align:"center"})}),rowKey:"id",loading:a,pagination:{pageSize:ve},request:function(){var u=T()(g()().mark(function v(o,s,j){var C,S,W,_,$;return g()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return W=(0,k.HU)(o),W.reporterName=W.reporterNickname,delete W.reporterNickname,_=(0,k.r7)(s),L.next=6,(0,A.e0)({req:h()(h()(h()({},W),_),{},{current:o.current})});case 6:return $=L.sent,L.abrupt("return",{success:$.code===0,total:(C=$.data)===null||C===void 0?void 0:C.total,data:(S=$.data)===null||S===void 0?void 0:S.data});case 8:case"end":return L.stop()}},v)}));return function(v,o,s){return u.apply(this,arguments)}}()}),ue&&(0,r.jsx)(_e,{open:ue,record:U,onCancel:function(){return le(!1)}}),ne&&(0,r.jsx)(P.Z,{title:"\u5BA1\u6838\u4E3E\u62A5",open:ne,footer:[(0,r.jsx)(l.ZP,{onClick:function(){return V(!1)},children:"\u53D6\u6D88"},"cancel"),(0,r.jsx)(l.ZP,{danger:!0,onClick:function(){return se("NOT_PASS")},children:"\u62D2\u7EDD"},"reject"),(0,r.jsx)(l.ZP,{type:"primary",onClick:function(){return se("APPROVED")},children:"\u901A\u8FC7"},"approve")],destroyOnClose:!0,onCancel:function(){G(void 0),V(!1),Q.resetFields()},children:(0,r.jsx)(i.Z,{form:Q,children:(0,r.jsx)(i.Z.Item,{name:"replyContent",label:"\u5BA1\u6838\u56DE\u590D",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u5BA1\u6838\u56DE\u590D"}],children:(0,r.jsx)(I.Z.TextArea,{defaultValue:U==null?void 0:U.replyContent,rows:4,placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6838\u56DE\u590D"})})})})]})})},je=he},24727:function(z,x,e){e.d(x,{cC:function(){return F},e0:function(){return c},nN:function(){return n}});var y=e(13769),h=e.n(y),b=e(15009),m=e.n(b),p=e(97857),E=e.n(p),K=e(99289),g=e.n(K),R=e(76772),T=["id"];function c(l,d){return t.apply(this,arguments)}function t(){return t=g()(m()().mark(function l(d,P){return m()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,R.request)("/application",E()({method:"GET",params:E()(E()({},d),{},{req:void 0},d.req)},P||{})));case 1:case"end":return A.stop()}},l)})),t.apply(this,arguments)}function n(l,d,P){return i.apply(this,arguments)}function i(){return i=g()(m()().mark(function l(d,P,I){var A,D;return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return A=d.id,D=h()(d,T),M.abrupt("return",(0,R.request)("/application/audit/".concat(A),E()({method:"POST",headers:{"Content-Type":"application/json"},params:E()({},D),data:P},I||{})));case 2:case"end":return M.stop()}},l)})),i.apply(this,arguments)}function F(l,d,P){return f.apply(this,arguments)}function f(){return f=g()(m()().mark(function l(d,P,I){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,R.request)("/application/report/comment",E()({method:"POST",headers:{"Content-Type":"application/json"},params:E()({},d),data:P},I||{})));case 1:case"end":return D.stop()}},l)})),f.apply(this,arguments)}}}]);
