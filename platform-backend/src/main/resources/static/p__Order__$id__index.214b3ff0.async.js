"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1897],{26538:function(x,M,e){var D=e(97857),o=e.n(D),g=e(67294),n=e(85893),U=function(c){var m=c.wordSize,l=m===void 0?5:m,d=c.label,B=c.children,P=c.endsWithColon,f=P===void 0?!0:P,F=c.strong,O={};return F&&(console.log(d,F),O.fontWeight="bold"),(0,n.jsxs)("div",{style:o()({display:"flex",flexDirection:"row",justifyContent:"start"},O),children:[(0,n.jsxs)("div",{style:{width:l+"rem"},children:[d,f?"\uFF1A":""]}),(0,n.jsx)("div",{children:B})]})};M.Z=U},47848:function(x,M,e){var D=e(97857),o=e.n(D),g=e(13769),n=e.n(g),U=e(67294),i=e(26538),c=e(42075),m=e(85893),l=["items"],d=["children"],B=function(f){var F=f.items,O=n()(f,l);return(0,m.jsx)(c.Z,{direction:"vertical",size:"middle",children:F.map(function(T){var W=T.children,R=n()(T,d);return(0,m.jsx)(i.Z,o()(o()(o()({},O),R),{},{children:W}),T.label)})})};M.Z=B},87301:function(x,M,e){var D=e(37411),o=e(66309),g=e(67294),n=e(85893),U=function(c){var m=c.status;switch(m){case D.DF.WAIT_PAY:return(0,n.jsx)(o.Z,{color:"processing",children:"\u5F85\u652F\u4ED8"});case D.DF.PAID:return(0,n.jsx)(o.Z,{color:"success",children:"\u5DF2\u652F\u4ED8"});case D.DF.CANCEL:return(0,n.jsx)(o.Z,{color:"error",children:"\u5DF2\u53D6\u6D88"});case D.DF.REFUNDING:return(0,n.jsx)(o.Z,{color:"processing",children:"\u9000\u6B3E\uFF0C\u5F85\u5BA1\u6838"});case D.DF.REFUND_SUCCESS:return(0,n.jsx)(o.Z,{color:"success",children:"\u9000\u6B3E\u6210\u529F"});case D.DF.REFUND_FAIL:return(0,n.jsx)(o.Z,{color:"red",children:"\u9000\u6B3E\u5931\u8D25"});case D.DF.REFUND_CANCEL:return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.Z,{color:"success",children:"\u5DF2\u652F\u4ED8"})});default:return(0,n.jsx)(o.Z,{children:"\u672A\u77E5\u72B6\u6001"})}};M.Z=U},97879:function(x,M,e){var D=e(15009),o=e.n(D),g=e(99289),n=e.n(g),U=e(37411),i=e(37476),c=e(53025),m=e(78045),l=e(42075),d=e(55102),B=e(67294),P=e(85893),f=function(O){var T=O.open,W=O.onCancel,R=O.onOk;return(0,P.jsxs)(i.Y,{clearOnDestroy:!0,title:"\u9000\u6B3E\u7533\u8BF7",open:T,onFinish:function(){var I=n()(o()().mark(function C(L){return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:R(L);case 1:case"end":return _.stop()}},C)}));return function(C){return I.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0},onOpenChange:function(C){C||W()},children:[(0,P.jsx)(c.Z.Item,{name:"reason",label:"\u9000\u6B3E\u539F\u56E0",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9000\u6B3E\u539F\u56E0"}],children:(0,P.jsx)(m.ZP.Group,{children:(0,P.jsx)(l.Z,{direction:"vertical",children:U.Y8.map(function(I){return(0,P.jsx)(m.ZP,{value:I.value,children:(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:I.label}),(0,P.jsx)("div",{style:{fontSize:"12px",color:"#999"},children:I.description})]})},I.value)})})})}),(0,P.jsx)(c.Z.Item,{name:"description",label:"\u8865\u5145\u8BF4\u660E",children:(0,P.jsx)(d.Z.TextArea,{placeholder:"\u8BF7\u8BE6\u7EC6\u63CF\u8FF0\u9000\u6B3E\u539F\u56E0\uFF08\u9009\u586B\uFF09",maxLength:200,showCount:!0,rows:4})})]})};M.Z=f},37411:function(x,M,e){e.d(M,{$Q:function(){return c},Be:function(){return n},DF:function(){return l},RF:function(){return o},Y8:function(){return D},tT:function(){return i},tW:function(){return g},vY:function(){return m},zh:function(){return U}});var D=[{label:"\u529F\u80FD\u4E0D\u7B26",value:"functionality_mismatch",description:"\u8D2D\u4E70\u7684API\u529F\u80FD\u4E0E\u63CF\u8FF0\u4E0D\u7B26"},{label:"\u670D\u52A1\u4E2D\u65AD",value:"service_disruption",description:"\u7531\u4E8E\u670D\u52A1\u5546\u95EE\u9898\u9020\u6210\u529F\u80FD\u4E0D\u53EF\u7528\u6216\u670D\u52A1\u4E2D\u65AD"},{label:"\u6570\u636E\u9519\u8BEF",value:"data_inaccuracy",description:"\u63D0\u4F9B\u7684\u6570\u636E\u5B58\u5728\u9519\u8BEF\u6216\u4E0D\u51C6\u786E"},{label:"\u672A\u6388\u6743\u4F7F\u7528",value:"unauthorized_use",description:"\u672A\u7ECF\u8BB8\u53EF\u7684\u6570\u636E\u8BBF\u95EE\u6216\u4F7F\u7528"},{label:"\u4EF7\u683C\u4E89\u8BAE",value:"pricing_dispute",description:"\u5BF9\u8D39\u7528\u3001\u9690\u85CF\u6536\u8D39\u6216\u4EF7\u683C\u53D8\u52A8\u6709\u5F02\u8BAE"},{label:"\u6280\u672F\u652F\u6301\u4E0D\u8DB3",value:"insufficient_support",description:"\u672A\u80FD\u83B7\u5F97\u5E94\u6709\u7684\u6280\u672F\u652F\u6301\u6216\u5E2E\u52A9"},{label:"\u5176\u4ED6\u539F\u56E0",value:"other",description:"\u5176\u4ED6\u5BFC\u81F4\u8BF7\u6C42\u9000\u6B3E\u7684\u539F\u56E0"}];function o(d){return[l.PAID,l.REFUND_CANCEL,l.REFUND_FAIL].includes(d)}function g(d){return[l.WAIT_PAY].includes(d)}function n(d){return![l.CANCEL].includes(d)&&[l.WAIT_PAY].includes(d)}function U(d){return![l.REFUND_CANCEL].includes(d)&&[l.REFUNDING].includes(d)}function i(d,B){return B!==0&&![l.REFUNDING,l.REFUND_SUCCESS,l.REFUND_FAIL].includes(d)&&[l.PAID,l.REFUND_CANCEL].includes(d)}function c(d){return[l.REFUNDING,l.REFUND_SUCCESS,l.REFUND_FAIL].includes(d)}var m={0:{text:"\u7B49\u5F85\u652F\u4ED8"},1:{text:"\u5DF2\u652F\u4ED8"},2:{text:"\u672A\u652F\u4ED8"},40:{text:"\u9000\u6B3E\uFF0C\u5F85\u5BA1\u6838"},41:{text:"\u9000\u6B3E\u6210\u529F"},42:{text:"\u9000\u6B3E\u5931\u8D25"},43:{text:"\u53D6\u6D88\u9000\u6B3E"}},l={WAIT_PAY:0,PAID:1,CANCEL:2,REFUNDING:40,REFUND_SUCCESS:41,REFUND_FAIL:42,REFUND_CANCEL:43}},9398:function(x,M,e){e.r(M);var D=e(97857),o=e.n(D),g=e(15009),n=e.n(g),U=e(99289),i=e.n(U),c=e(5574),m=e.n(c),l=e(26538),d=e(47848),B=e(87301),P=e(97879),f=e(37411),F=e(27681),O=e(61761),T=e(59753),W=e(93410),R=e(76772),I=e(74330),C=e(42075),L=e(4393),u=e(71471),_=e(95715),s=e(83622),v=e(16568),t=e(2453),j=e(17788),N=e(19207),b=e(14104),y=e(67294),a=e(85893),ne=6,ie=function(){var w,z,Y,S,V,H,de=(0,R.useModel)("@@initialState"),Q=de.initialState,re=(0,R.useParams)(),ce=(0,y.useState)(!1),te=m()(ce,2),me=te[0],X=te[1],pe=(0,y.useState)(!0),_e=m()(pe,2),fe=_e[0],Ee=_e[1],he=(0,y.useState)({}),ae=m()(he,2),r=ae[0],$=ae[1],De=(0,y.useState)(0),oe=m()(De,2),Pe=oe[0],J=oe[1],ve=(0,y.useState)(""),se=m()(ve,2),je=se[0],k=se[1],Oe=(Q==null?void 0:Q.currentUser.id)===r.userId,Ce=(0,y.useState)(!1),le=m()(Ce,2),ue=le[0],q=le[1],ee=function(){return(0,O.HG)({orderId:re.id})};return(0,y.useEffect)(function(){var E=!0;return ee().then(function(p){E&&p.data&&($(p.data),Ee(!1))}),function(){E=!1}},[]),fe?(0,a.jsx)(I.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.Z,{children:(0,a.jsx)(C.Z,{direction:"vertical",style:{width:"100%",height:"100%"},children:(0,a.jsxs)(W.Z,{children:[(0,a.jsxs)(L.Z,{variant:"borderless",children:[!r.api&&(0,a.jsx)(u.Z.Paragraph,{type:"danger",children:"API\u88AB\u5220\u9664"}),r.api&&(0,a.jsxs)(C.Z,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsx)(R.Link,{to:"/api/info/".concat(r.apiId),children:(0,a.jsxs)(C.Z,{direction:"horizontal",style:{width:"100%",justifyContent:"start"},children:[(0,a.jsx)(_.Z,{src:r.api.logoUrl,width:100,height:100}),(0,a.jsx)(u.Z.Title,{level:4,children:r.api.name})]})}),(0,a.jsxs)(L.Z,{style:{width:"100%"},children:[(0,a.jsx)(u.Z.Paragraph,{children:"\u63CF\u8FF0\uFF1A"}),(0,a.jsx)(u.Z.Paragraph,{children:r.api.description})]})]})]}),(0,a.jsx)(L.Z,{variant:"borderless",children:(0,a.jsx)(l.Z,{wordSize:ne,label:"\u8BA2\u5355\u7F16\u53F7",strong:!0,children:r.orderId})}),(0,a.jsx)(L.Z,{variant:"borderless",children:(0,a.jsx)(C.Z,{direction:"vertical",size:"large",children:(0,a.jsx)(d.Z,{wordSize:ne,items:[{label:"\u7528\u6237",children:"".concat(r.userNickname,"@").concat(r.username)},{label:"\u5B9E\u9645\u652F\u4ED8",children:r.actualPayment},{label:"\u5355\u4EF7",children:(w=r.price)===null||w===void 0?void 0:w.toFixed(5)},{label:"\u8D2D\u4E70\u6570\u91CF",children:r.amount},{label:"\u662F\u5426\u5DF2\u4F7F\u7528",children:r.isUsed?"\u662F":"\u5426"},{label:"\u652F\u4ED8\u72B6\u6001",children:(0,a.jsx)(B.Z,{status:r.status})},{label:"\u521B\u5EFA\u65F6\u95F4",children:(0,T.i$)(r.ctime)},{label:"\u66F4\u65B0\u65F6\u95F4",children:(0,T.i$)(r.utime)}]})})}),r.application&&(0,a.jsxs)(L.Z,{title:"\u9000\u6B3E\u4FE1\u606F",children:[(0,a.jsxs)(u.Z.Paragraph,{children:["\u9000\u6B3E\u65F6\u95F4\uFF1A ",(0,T.i$)((z=r.application)===null||z===void 0?void 0:z.ctime)]}),(0,a.jsxs)(u.Z.Paragraph,{children:["\u9000\u6B3E\u539F\u56E0\uFF1A ",(Y=f.Y8.find(function(E){var p;return E.value===((p=r.application)===null||p===void 0?void 0:p.reason)}))===null||Y===void 0?void 0:Y.label]}),(0,a.jsxs)(u.Z.Paragraph,{children:["\u8BE6\u7EC6\u63CF\u8FF0\uFF1A ",((S=r.application)===null||S===void 0||(S=S.description)===null||S===void 0?void 0:S.length)!==0?r.application.description:(V=f.Y8.find(function(E){var p;return E.value===((p=r.application)===null||p===void 0?void 0:p.reason)}))===null||V===void 0?void 0:V.description]}),(0,a.jsxs)(u.Z.Paragraph,{children:["\u5BA1\u6838\u56DE\u590D\uFF1A ",(H=r.application)===null||H===void 0?void 0:H.replyContent]})]}),Oe&&(0,a.jsx)(L.Z,{variant:"borderless",children:(0,a.jsxs)(C.Z,{direction:"horizontal",style:{width:"100%",justifyContent:"center"},children:[(0,f.tW)(r.status)?(0,a.jsx)(R.Link,{to:"/order/pay/".concat(r.orderId),children:(0,a.jsx)(s.ZP,{children:"\u524D\u5F80\u652F\u4ED8"})}):(0,a.jsx)(s.ZP,{type:"dashed",disabled:!0,children:"\u524D\u5F80\u652F\u4ED8"}),(0,a.jsx)(s.ZP,{type:(0,f.Be)(r.status)?"primary":"dashed",disabled:!(0,f.Be)(r.status),onClick:i()(n()().mark(function E(){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:(0,O.bU)({orderId:re.id,isCancel:!0}).then(function(){v.ZP.success({message:"\u53D6\u6D88\u6210\u529F"}),R.history.push("/order/list")});case 1:case"end":return A.stop()}},E)})),children:"\u53D6\u6D88\u8BA2\u5355"}),(0,a.jsx)(s.ZP,{type:r.isUsed||!(0,f.tT)(r.status,r.actualPayment)?"dashed":"primary",disabled:r.isUsed||!(0,f.tT)(r.status,r.actualPayment),onClick:i()(n()().mark(function E(){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:q(!0);case 1:case"end":return A.stop()}},E)})),children:"\u9000\u6B3E"}),(0,a.jsx)(s.ZP,{type:r.isUsed||!(0,f.zh)(r.status)?"dashed":"primary",disabled:r.isUsed||!(0,f.zh)(r.status),onClick:i()(n()().mark(function E(){var p;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,O.LO)({orderUid:r.orderId});case 2:if(p=h.sent,p.code===0){h.next=6;break}return t.ZP.error("\u53D6\u6D88\u9000\u6B3E\u5931\u8D25"),h.abrupt("return");case 6:ee().then(function(K){K.code===0&&K.data&&r.status!==K.data.status&&$(K.data)}),t.ZP.success("\u53D6\u6D88\u9000\u6B3E\u6210\u529F");case 8:case"end":return h.stop()}},E)})),children:"\u53D6\u6D88\u9000\u6B3E"}),(0,a.jsx)(s.ZP,{type:(0,f.RF)(r.status)?"primary":"dashed",disabled:r.isComment||!(0,f.RF)(r.status),onClick:i()(n()().mark(function E(){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:X(!0);case 1:case"end":return A.stop()}},E)})),children:r.isComment?"\u5DF2\u8BC4\u8BBA":(0,f.RF)(r.status)?"\u8BC4\u8BBA":"\u8BA2\u5355\u72B6\u6001\u65E0\u6CD5\u8BC4\u8BBA"})]})})]})})}),ue&&(0,a.jsx)(P.Z,{open:ue,onCancel:function(){q(!1)},onOk:function(){var E=i()(n()().mark(function p(A){var h,K;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,O.iS)({orderId:r.orderId,reason:A.reason,description:(h=A.description)!==null&&h!==void 0?h:""});case 2:K=Z.sent,K.code===0&&(ee().then(function(G){G.code===0&&G.data&&r.status!==G.data.status&&$(G.data)}),v.ZP.success({message:"\u9000\u6B3E\u7533\u8BF7\u6210\u529F"}),q(!1));case 4:case"end":return Z.stop()}},p)}));return function(p){return E.apply(this,arguments)}}()}),(0,a.jsx)(j.Z,{title:"\u586B\u5199\u8BA2\u5355\u8BC4\u8BBA",open:me,onOk:i()(n()().mark(function E(){var p;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,(0,F.w)({apiId:r.apiId,orderId:r.id,score:Pe*2,content:je});case 3:if(p=h.sent,p.code===0){h.next=6;break}return h.abrupt("return");case 6:v.ZP.success({message:"\u8BC4\u8BBA\u6210\u529F"}),$(o()(o()({},r),{},{isComment:!0})),X(!1),J(0),k("");case 11:return h.prev=11,h.finish(11);case 13:case"end":return h.stop()}},E,null,[[0,,11,13]])})),onCancel:function(){X(!1),J(0),k("")},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,a.jsxs)(C.Z,{direction:"vertical",size:"large",style:{width:"100%",paddingTop:30,paddingBottom:50},children:[(0,a.jsx)(N.Z,{allowHalf:!0,onChange:function(p){J(p)}}),(0,a.jsx)(b.Z,{showCount:!0,maxLength:500,style:{width:"100%"},onChange:function(p){k(p.target.value)}})]})})]})};M.default=ie},27681:function(x,M,e){e.d(M,{Xm:function(){return L},YF:function(){return I},nQ:function(){return f},w:function(){return O}});var D=e(13769),o=e.n(D),g=e(15009),n=e.n(g),U=e(97857),i=e.n(U),c=e(99289),m=e.n(c),l=e(76772),d=null,B=["id"],P=["id"];function f(_,s){return F.apply(this,arguments)}function F(){return F=m()(n()().mark(function _(s,v){return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,l.request)("/comment",i()({method:"GET",params:i()(i()({},s),{},{commonPageReq:void 0},s.commonPageReq)},v||{})));case 1:case"end":return j.stop()}},_)})),F.apply(this,arguments)}function O(_,s){return T.apply(this,arguments)}function T(){return T=m()(n()().mark(function _(s,v){return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,l.request)("/comment",i()({method:"POST",headers:{"Content-Type":"application/json"},data:s},v||{})));case 1:case"end":return j.stop()}},_)})),T.apply(this,arguments)}function W(_,s){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function _(s,v){var t,j;return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=s.id,j=_objectWithoutProperties(s,d),b.abrupt("return",request("/comment/".concat(t),_objectSpread({method:"GET",params:_objectSpread({},j)},v||{})));case 2:case"end":return b.stop()}},_)})),R.apply(this,arguments)}function I(_,s){return C.apply(this,arguments)}function C(){return C=m()(n()().mark(function _(s,v){var t,j;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=s.id,j=o()(s,B),b.abrupt("return",(0,l.request)("/comment/".concat(t),i()({method:"DELETE",params:i()({},j)},v||{})));case 2:case"end":return b.stop()}},_)})),C.apply(this,arguments)}function L(_,s){return u.apply(this,arguments)}function u(){return u=m()(n()().mark(function _(s,v){var t,j;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=s.id,j=o()(s,P),b.abrupt("return",(0,l.request)("/comment/".concat(t,"/favor"),i()({method:"POST",params:i()({},j)},v||{})));case 2:case"end":return b.stop()}},_)})),u.apply(this,arguments)}},61761:function(x,M,e){e.d(M,{AP:function(){return F},HG:function(){return m},LO:function(){return C},LV:function(){return P},XB:function(){return T},bU:function(){return d},iS:function(){return R}});var D=e(15009),o=e.n(D),g=e(97857),n=e.n(g),U=e(99289),i=e.n(U),c=e(76772);function m(u,_){return l.apply(this,arguments)}function l(){return l=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order",n()({method:"GET",params:n()({},_)},s||{})));case 1:case"end":return t.stop()}},u)})),l.apply(this,arguments)}function d(u,_){return B.apply(this,arguments)}function B(){return B=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order",n()({method:"PUT",params:n()({},_)},s||{})));case 1:case"end":return t.stop()}},u)})),B.apply(this,arguments)}function P(u,_){return f.apply(this,arguments)}function f(){return f=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order",n()({method:"POST",headers:{"Content-Type":"application/json"},data:_},s||{})));case 1:case"end":return t.stop()}},u)})),f.apply(this,arguments)}function F(u,_){return O.apply(this,arguments)}function O(){return O=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order/admin/list",n()({method:"POST",headers:{"Content-Type":"application/json"},data:_},s||{})));case 1:case"end":return t.stop()}},u)})),O.apply(this,arguments)}function T(u,_){return W.apply(this,arguments)}function W(){return W=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order/list",n()({method:"POST",headers:{"Content-Type":"application/json"},data:_},s||{})));case 1:case"end":return t.stop()}},u)})),W.apply(this,arguments)}function R(u,_){return I.apply(this,arguments)}function I(){return I=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order/refund",n()({method:"PUT",headers:{"Content-Type":"application/json"},data:_},s||{})));case 1:case"end":return t.stop()}},u)})),I.apply(this,arguments)}function C(u,_){return L.apply(this,arguments)}function L(){return L=i()(o()().mark(function u(_,s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/order/refund/cancel",n()({method:"DELETE",params:n()({},_)},s||{})));case 1:case"end":return t.stop()}},u)})),L.apply(this,arguments)}}}]);
