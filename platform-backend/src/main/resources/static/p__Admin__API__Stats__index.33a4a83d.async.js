"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1676],{23095:function(le,z,n){n.r(z),n.d(z,{default:function(){return a}});var T=n(15009),j=n.n(T),P=n(97857),i=n.n(P),w=n(99289),Z=n.n(w),X=n(5574),S=n.n(X),v=n(67294),$=n(4393),y=n(42075),C=n(71471),F=n(34041),B=n(55102),Y=n(86250),R=n(83622),H=n(67839),V=n(76772);function ee(s,m){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function s(m,x){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/admin/statistics/api-order",_objectSpread({method:"GET",params:_objectSpread(_objectSpread({},m),{},{req:void 0},m.req)},x||{})));case 1:case"end":return d.stop()}},s)})),D.apply(this,arguments)}function Q(s,m){return O.apply(this,arguments)}function O(){return O=Z()(j()().mark(function s(m,x){return j()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,V.request)("/admin/statistics/api-usage",i()({method:"GET",params:i()(i()({},m),{},{req:void 0},m.req)},x||{})));case 1:case"end":return d.stop()}},s)})),O.apply(this,arguments)}function K(s){return A.apply(this,arguments)}function A(){return A=Z()(j()().mark(function s(m){return j()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,V.request)("/admin/statistics/api-usage/time-range",i()({method:"GET"},m||{})));case 1:case"end":return c.stop()}},s)})),A.apply(this,arguments)}var te=n(27484),L=n.n(te),t=n(90930),e=n(85893),r=function(){var m=(0,v.useState)(!1),x=S()(m,2),c=x[0],d=x[1],G=(0,v.useState)([]),U=S()(G,2),N=U[0],g=U[1],b=(0,v.useState)({}),W=S()(b,2),p=W[0],E=W[1],k=(0,v.useState)({}),J=S()(k,2),o=J[0],M=J[1],I=(0,v.useState)([]),ne=S()(I,2),ae=ne[0],ie=ne[1],ue=(0,v.useState)({callTimes:0,successTimes:0,totalDuration:0}),re=S()(ue,2),q=re[0],oe=re[1];(0,v.useEffect)(function(){K().then(function(l){if(l.code===0&&l.data){for(var f=L()(l.data[0]).year(),u=L()(l.data[1]).year(),_=[],h=f;h<=u;h++)_.push(h);ie(_),se()}})},[]),(0,v.useEffect)(function(){se()},[o]);var se=function(){var l=Z()(j()().mark(function f(){var u;return j()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return d(!0),h.prev=1,h.next=4,Q({req:i()({},o)});case 4:u=h.sent,u.code===0&&u.data?(g(u.data.status||[]),oe({callTimes:u.data.callTimes,successTimes:u.data.successTimes,totalDuration:u.data.totalDuration})):g([]);case 6:return h.prev=6,d(!1),h.finish(6);case 9:case"end":return h.stop()}},f,null,[[1,,6,9]])}));return function(){return l.apply(this,arguments)}}(),ce=[{title:"\u65E5\u671F",dataIndex:"createDate",key:"createDate"},{title:"\u8C03\u7528\u6B21\u6570",dataIndex:"callTimes",key:"callTimes"},{title:"\u6210\u529F\u8C03\u7528\u6B21\u6570",dataIndex:"successTimes",key:"successTimes"},{title:"\u8017\u65F6(ms)",dataIndex:"totalDuration",key:"totalDuration"}];return(0,e.jsx)(t._z,{title:!1,children:(0,e.jsx)($.Z,{children:(0,e.jsxs)(y.Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,e.jsxs)(y.Z,{direction:"horizontal",size:"large",children:[(0,e.jsxs)(y.Z,{direction:"horizontal",children:[(0,e.jsx)(C.Z.Text,{children:"\u5E74\u4EFD"}),(0,e.jsx)(F.Z,{style:{width:120},placeholder:"\u9009\u62E9\u5E74\u4EFD",allowClear:!0,value:p.year,onChange:function(f){E(function(u){return i()(i()({},u),{},{year:f})})},children:ae.map(function(l){return(0,e.jsxs)(F.Z.Option,{value:l,children:[l,"\u5E74"]},l)})})]}),(0,e.jsxs)(y.Z,{direction:"horizontal",children:[(0,e.jsx)(C.Z.Text,{children:"\u6708\u4EFD"}),(0,e.jsx)(F.Z,{style:{width:120},placeholder:"\u9009\u62E9\u6708\u4EFD",allowClear:!0,value:p.month,onChange:function(f){E(function(u){return i()(i()({},u),{},{month:f})})},children:ae.length!==0&&Array.from({length:12},function(l,f){return f+1}).map(function(l){return(0,e.jsxs)(F.Z.Option,{value:l,children:[l,"\u6708"]},l)})})]})]}),(0,e.jsxs)(y.Z,{direction:"horizontal",children:["API\u540D\u79F0\uFF1A",(0,e.jsx)(B.Z,{style:{width:150},placeholder:"API\u540D\u79F0",value:p.apiName,onChange:function(f){E(function(u){return i()(i()({},u),{},{apiName:f.target.value||void 0})})}})]}),(0,e.jsxs)(y.Z,{direction:"horizontal",children:["\u7528\u6237\u540D\uFF1A",(0,e.jsx)(B.Z,{style:{width:150,marginLeft:5},placeholder:"username",value:p.username,onChange:function(f){E(function(u){return i()(i()({},u),{},{username:f.target.value||void 0})})}})]}),(0,e.jsx)(Y.Z,{justify:"end",children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(R.ZP,{onClick:function(){E({}),M({})},children:"\u91CD\u7F6E"}),(0,e.jsx)(R.ZP,{type:"primary",onClick:function(){M(i()({},p))},children:"\u67E5\u8BE2"})]})}),!N||N.length===0?(0,e.jsxs)(C.Z.Title,{level:4,style:{textAlign:"center",margin:"40px 0"},children:[!o.username&&!o.apiName&&"\u6682\u65E0\u6570\u636E",!o.username&&o.apiName&&"".concat(o.apiName," \u6682\u65E0\u6570\u636E"),o.username&&!o.apiName&&"".concat(o.username," \u6682\u65E0\u6570\u636E"),o.username&&o.apiName&&"".concat(o.username," \u5728 ").concat(o.apiName," \u7684\u4F7F\u7528\u4E0A\u6682\u65E0\u6570\u636E")]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.Z,{type:"inner",children:(0,e.jsxs)(y.Z,{size:"large",children:[(0,e.jsxs)(C.Z.Title,{level:4,style:{margin:0},children:["\u603B\u8C03\u7528\u6B21\u6570\uFF1A",q.callTimes]}),(0,e.jsxs)(C.Z.Title,{level:4,style:{margin:0},children:["\u603B\u6210\u529F\u8C03\u7528\u6B21\u6570\uFF1A",q.successTimes]}),(0,e.jsxs)(C.Z.Title,{level:4,style:{margin:0},children:["\u603B\u8017\u65F6\uFF1A",q.totalDuration,"ms"]})]})}),(0,e.jsx)(H.Z,{columns:ce.map(function(l){return i()(i()({},l),{},{align:"center"})}),dataSource:N,rowKey:"date",loading:c,pagination:!1})]})]})})})},a=r},86250:function(le,z,n){n.d(z,{Z:function(){return L}});var T=n(67294),j=n(93967),P=n.n(j),i=n(98423),w=n(98065),Z=n(53124),X=n(83559),S=n(83262);const v=["wrap","nowrap","wrap-reverse"],$=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],y=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],C=(t,e)=>{const r=e.wrap===!0?"wrap":e.wrap;return{[`${t}-wrap-${r}`]:r&&v.includes(r)}},F=(t,e)=>{const r={};return y.forEach(a=>{r[`${t}-align-${a}`]=e.align===a}),r[`${t}-align-stretch`]=!e.align&&!!e.vertical,r},B=(t,e)=>{const r={};return $.forEach(a=>{r[`${t}-justify-${a}`]=e.justify===a}),r};function Y(t,e){return P()(Object.assign(Object.assign(Object.assign({},C(t,e)),F(t,e)),B(t,e)))}var R=Y;const H=t=>{const{componentCls:e}=t;return{[e]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},V=t=>{const{componentCls:e}=t;return{[e]:{"&-gap-small":{gap:t.flexGapSM},"&-gap-middle":{gap:t.flexGap},"&-gap-large":{gap:t.flexGapLG}}}},ee=t=>{const{componentCls:e}=t,r={};return v.forEach(a=>{r[`${e}-wrap-${a}`]={flexWrap:a}}),r},D=t=>{const{componentCls:e}=t,r={};return y.forEach(a=>{r[`${e}-align-${a}`]={alignItems:a}}),r},Q=t=>{const{componentCls:e}=t,r={};return $.forEach(a=>{r[`${e}-justify-${a}`]={justifyContent:a}}),r},O=()=>({});var K=(0,X.I$)("Flex",t=>{const{paddingXS:e,padding:r,paddingLG:a}=t,s=(0,S.mergeToken)(t,{flexGapSM:e,flexGap:r,flexGapLG:a});return[H(s),V(s),ee(s),D(s),Q(s)]},O,{resetStyle:!1}),A=function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(r[a[s]]=t[a[s]]);return r},L=T.forwardRef((t,e)=>{const{prefixCls:r,rootClassName:a,className:s,style:m,flex:x,gap:c,children:d,vertical:G=!1,component:U="div"}=t,N=A(t,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:g,direction:b,getPrefixCls:W}=T.useContext(Z.E_),p=W("flex",r),[E,k,J]=K(p),o=G!=null?G:g==null?void 0:g.vertical,M=P()(s,a,g==null?void 0:g.className,p,k,J,R(p,t),{[`${p}-rtl`]:b==="rtl",[`${p}-gap-${c}`]:(0,w.n)(c),[`${p}-vertical`]:o}),I=Object.assign(Object.assign({},g==null?void 0:g.style),m);return x&&(I.flex=x),c&&!(0,w.n)(c)&&(I.gap=c),E(T.createElement(U,Object.assign({ref:e,className:M,style:I},(0,i.Z)(N,["justify","wrap","align"])),d))})}}]);
