"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1551],{49030:function(Ce,M,t){t.r(M),t.d(M,{default:function(){return S}});var D=t(15009),m=t.n(D),k=t(97857),o=t.n(k),B=t(99289),O=t.n(B),H=t(5574),v=t.n(H),g=t(67294),T=t(2453),G=t(17788),Z=t(42075),A=t(83622),Q=t(4393),W=t(55102),R=t(84567),Y=t(86250),K=t(71471),q=t(67839),_=t(13769),b=t.n(_),N=t(76772),ee=["id"],te=["id"];function oe(h,c){return V.apply(this,arguments)}function V(){return V=O()(m()().mark(function h(c,d){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,N.request)("/admin/api/usage/user",o()({method:"GET",params:o()(o()({},c),{},{req:void 0},c.req)},d||{})));case 1:case"end":return p.stop()}},h)})),V.apply(this,arguments)}function e(h,c,d){return n.apply(this,arguments)}function n(){return n=O()(m()().mark(function h(c,d,C){var p,j;return m()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=c.id,j=b()(c,ee),y.abrupt("return",(0,N.request)("/admin/api/usage/user/".concat(p),o()({method:"POST",headers:{"Content-Type":"application/json"},params:o()({},j),data:d},C||{})));case 2:case"end":return y.stop()}},h)})),n.apply(this,arguments)}function l(h,c){return r.apply(this,arguments)}function r(){return r=O()(m()().mark(function h(c,d){var C,p;return m()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return C=c.id,p=b()(c,te),x.abrupt("return",(0,N.request)("/admin/api/usage/user/".concat(C),o()({method:"DELETE",params:o()({},p)},d||{})));case 2:case"end":return x.stop()}},h)})),r.apply(this,arguments)}var f=t(53025),ne=t(37804),a=t(85893),U=function(c){var d=c.open,C=c.onCancel,p=c.onOk,j=c.initialValues,x=c.loading,y=f.Z.useForm(),$=v()(y,1),w=$[0];return(0,g.useEffect)(function(){d&&j&&w.setFieldsValue(j)},[d,j]),(0,a.jsx)(G.Z,{title:"\u4FEE\u6539\u4F7F\u7528\u60C5\u51B5",open:d,onCancel:function(){w.resetFields(),C()},onOk:function(){w.validateFields().then(p)},confirmLoading:x,destroyOnClose:!0,children:(0,a.jsxs)(f.Z,{form:w,layout:"vertical",children:[(0,a.jsx)(f.Z.Item,{label:"\u5269\u4F59\u6B21\u6570",name:"leftTimes",rules:[{required:!1,message:"\u8BF7\u8F93\u5165\u5269\u4F59\u6B21\u6570"}],children:(0,a.jsx)(ne.Z,{min:0,style:{width:"100%"}})}),(0,a.jsx)(f.Z.Item,{label:"\u514D\u8D39\u8D2D\u4E70\u662F\u5426\u7528\u8FC7",name:"freeUsed",valuePropName:"checked",rules:[{required:!1}],children:(0,a.jsx)(R.Z,{})})]})})},re=U,L=t(90930),ce=5,ae=function(){var c=(0,g.useState)(!1),d=v()(c,2),C=d[0],p=d[1],j=(0,g.useState)([]),x=v()(j,2),y=x[0],$=x[1],w=(0,g.useState)(1),J=v()(w,2),se=J[0],de=J[1],je=(0,g.useState)(0),fe=v()(je,2),Fe=fe[0],Ee=fe[1],Ze=(0,g.useState)({}),pe=v()(Ze,2),I=pe[0],X=pe[1],Oe=(0,g.useState)({}),me=v()(Oe,2),ge=me[0],le=me[1],$e=(0,g.useState)(),ve=v()($e,2),he=ve[0],ie=ve[1],Ue=(0,g.useState)(!1),xe=v()(Ue,2),Pe=xe[0],ue=xe[1],Ae=(0,g.useState)(!1),ye=v()(Ae,2),we=ye[0],Se=ye[1],Ie=function(){var u=O()(m()().mark(function s(){var i;return m()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return p(!0),F.prev=1,F.next=4,oe({req:o()({current:se},ge)});case 4:i=F.sent,i.code===0&&i.data?($(i.data.data||[]),Ee(i.data.total)):$([]);case 6:return F.prev=6,p(!1),F.finish(6);case 9:case"end":return F.stop()}},s,null,[[1,,6,9]])}));return function(){return u.apply(this,arguments)}}();(0,g.useEffect)(function(){Ie()},[se,ge]);var De=function(s){ie(s),ue(!0)},Te=function(){var u=O()(m()().mark(function s(i){var P;return m()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return Se(!0),E.prev=1,E.next=4,e({id:he.id},i);case 4:P=E.sent,P.code===0&&(T.ZP.success("\u4FEE\u6539\u6210\u529F"),ue(!1),ie(void 0),le(o()({},I)));case 6:return E.prev=6,Se(!1),E.finish(6);case 9:case"end":return E.stop()}},s,null,[[1,,6,9]])}));return function(i){return u.apply(this,arguments)}}(),Ge=function(s){G.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u8BB0\u5F55\u5417\uFF1F",onOk:function(){var i=O()(m()().mark(function F(){var E;return m()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,l({id:s.id});case 2:E=z.sent,E.code===0&&(T.ZP.success("\u5220\u9664\u6210\u529F"),le(o()({},I)));case 4:case"end":return z.stop()}},F)}));function P(){return i.apply(this,arguments)}return P}()})},Ne=[{title:"id",dataIndex:"id"},{title:"API\u540D\u79F0",dataIndex:"apiName",width:200,render:function(s){return(0,a.jsx)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:s})}},{title:"\u7528\u6237\u540D",dataIndex:"username",width:200,render:function(s){return(0,a.jsx)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:s})}},{title:"\u7528\u6237\u6635\u79F0",dataIndex:"userNickname",width:200,render:function(s){return(0,a.jsx)("div",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:s})}},{title:"\u5269\u4F59\u6B21\u6570",dataIndex:"leftTimes",sorter:function(s,i){return(s.leftTimes||0)-(i.leftTimes||0)},render:function(s,i){return i.isFreeApi?"\u514D\u8D39\u65E0\u9650":"".concat(s)}},{title:"\u514D\u8D39\u8D2D\u4E70\u662F\u5426\u7528\u8FC7",dataIndex:"freeUsed",key:"freeUsed",width:"50",render:function(s){return s?"\u662F":"\u5426"},filterMultiple:!1,filterOnClose:!1,filters:[{value:!0,text:"\u662F"},{value:!1,text:"\u5426"}],onFilter:function(s,i){return s===i.freeUsed}},{title:"\u64CD\u4F5C",key:"action",render:function(s,i){return(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(A.ZP,{type:"link",onClick:function(){return De(i)},children:"\u4FEE\u6539"}),(0,a.jsx)(A.ZP,{type:"link",danger:!0,onClick:function(){return Ge(i)},children:"\u5220\u9664"})]})}}];return(0,a.jsx)(L._z,{title:!1,children:(0,a.jsxs)(Q.Z,{children:[(0,a.jsxs)(Z.Z,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsxs)(Z.Z,{direction:"vertical",children:[(0,a.jsxs)(Z.Z,{direction:"horizontal",children:["API\u540D\u79F0\uFF1A",(0,a.jsx)(W.Z,{style:{width:150},placeholder:"API\u540D\u79F0",value:I.apiName,onChange:function(s){return X(function(i){return o()(o()({},i),{},{apiName:s.target.value||void 0})})}})]}),(0,a.jsxs)(Z.Z,{direction:"horizontal",children:["\u7528\u6237\u540D\uFF1A",(0,a.jsx)(W.Z,{style:{width:150,marginLeft:5},placeholder:"username",value:I.username,onChange:function(s){return X(function(i){return o()(o()({},i),{},{username:s.target.value||void 0})})}})]}),(0,a.jsxs)(Z.Z,{direction:"horizontal",children:["\u6392\u9664\u514D\u8D39API\uFF1A",(0,a.jsx)(R.Z,{checked:I.excludeFreeApi,onChange:function(s){return X(function(i){return o()(o()({},i),{},{excludeFreeApi:s.target.checked})})}})]})]}),(0,a.jsx)(Y.Z,{justify:"end",children:(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(A.ZP,{onClick:function(){X({})},children:"\u91CD\u7F6E"}),(0,a.jsx)(A.ZP,{variant:"solid",color:"primary",onClick:function(){de(1),le(o()({},I))},children:"\u67E5\u8BE2"})]})}),!y||y.length===0?(0,a.jsx)(K.Z.Title,{level:4,style:{textAlign:"center",margin:"40px 0"},children:"\u6682\u65E0\u6570\u636E"}):(0,a.jsx)(q.Z,{loading:C,columns:Ne.map(function(u){return o()(o()({},u),{},{align:"center"})}),dataSource:y,rowKey:"id",pagination:{current:se,pageSize:5,total:Fe,onChange:function(s,i){de(s)}}})]}),(0,a.jsx)(re,{open:Pe,onCancel:function(){ue(!1),ie(void 0)},onOk:Te,initialValues:he,loading:we})]})})},S=ae},86250:function(Ce,M,t){t.d(M,{Z:function(){return V}});var D=t(67294),m=t(93967),k=t.n(m),o=t(98423),B=t(98065),O=t(53124),H=t(83559),v=t(83262);const g=["wrap","nowrap","wrap-reverse"],T=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],G=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Z=(e,n)=>{const l=n.wrap===!0?"wrap":n.wrap;return{[`${e}-wrap-${l}`]:l&&g.includes(l)}},A=(e,n)=>{const l={};return G.forEach(r=>{l[`${e}-align-${r}`]=n.align===r}),l[`${e}-align-stretch`]=!n.align&&!!n.vertical,l},Q=(e,n)=>{const l={};return T.forEach(r=>{l[`${e}-justify-${r}`]=n.justify===r}),l};function W(e,n){return k()(Object.assign(Object.assign(Object.assign({},Z(e,n)),A(e,n)),Q(e,n)))}var R=W;const Y=e=>{const{componentCls:n}=e;return{[n]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},K=e=>{const{componentCls:n}=e;return{[n]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},q=e=>{const{componentCls:n}=e,l={};return g.forEach(r=>{l[`${n}-wrap-${r}`]={flexWrap:r}}),l},_=e=>{const{componentCls:n}=e,l={};return G.forEach(r=>{l[`${n}-align-${r}`]={alignItems:r}}),l},b=e=>{const{componentCls:n}=e,l={};return T.forEach(r=>{l[`${n}-justify-${r}`]={justifyContent:r}}),l},N=()=>({});var ee=(0,H.I$)("Flex",e=>{const{paddingXS:n,padding:l,paddingLG:r}=e,f=(0,v.mergeToken)(e,{flexGapSM:n,flexGap:l,flexGapLG:r});return[Y(f),K(f),q(f),_(f),b(f)]},N,{resetStyle:!1}),te=function(e,n){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,r=Object.getOwnPropertySymbols(e);f<r.length;f++)n.indexOf(r[f])<0&&Object.prototype.propertyIsEnumerable.call(e,r[f])&&(l[r[f]]=e[r[f]]);return l},V=D.forwardRef((e,n)=>{const{prefixCls:l,rootClassName:r,className:f,style:ne,flex:a,gap:U,children:re,vertical:L=!1,component:ce="div"}=e,ae=te(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:S,direction:h,getPrefixCls:c}=D.useContext(O.E_),d=c("flex",l),[C,p,j]=ee(d),x=L!=null?L:S==null?void 0:S.vertical,y=k()(f,r,S==null?void 0:S.className,d,p,j,R(d,e),{[`${d}-rtl`]:h==="rtl",[`${d}-gap-${U}`]:(0,B.n)(U),[`${d}-vertical`]:x}),$=Object.assign(Object.assign({},S==null?void 0:S.style),ne);return a&&($.flex=a),U&&!(0,B.n)(U)&&($.gap=U),C(D.createElement(ce,Object.assign({ref:n,className:y,style:$},(0,o.Z)(ae,["justify","wrap","align"])),re))})}}]);
